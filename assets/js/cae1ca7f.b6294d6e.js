"use strict";(self.webpackChunkdocs_dutycall=self.webpackChunkdocs_dutycall||[]).push([[1726],{1470:(e,n,l)=>{l.d(n,{A:()=>T});var s=l(6540),r=l(4164),i=l(7559),t=l(3104),c=l(6347),a=l(205),o=l(7485),d=l(1682),h=l(679);function u(e){var n,l;return null!=(n=null==(l=s.Children.toArray(e).filter(function(e){return"\n"!==e}).map(function(e){if(!e||(0,s.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:l.filter(Boolean))?n:[]}function x(e){var n=e.values,l=e.children;return(0,s.useMemo)(function(){var e=null!=n?n:function(e){return u(e).map(function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}})}(l);return function(e){var n=(0,d.XI)(e,function(e,n){return e.value===n.value});if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(function(e){return e.value}).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,l])}function p(e){var n=e.value;return e.tabValues.some(function(e){return e.value===n})}function j(e){var n=e.queryString,l=void 0!==n&&n,r=e.groupId,i=(0,c.W6)(),t=function(e){var n=e.queryString,l=void 0!==n&&n,s=e.groupId;if("string"==typeof l)return l;if(!1===l)return null;if(!0===l&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=s?s:null}({queryString:l,groupId:r});return[(0,o.aZ)(t),(0,s.useCallback)(function(e){if(t){var n=new URLSearchParams(i.location.search);n.set(t,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}},[t,i])]}function g(e){var n,l,r,i,t=e.defaultValue,c=e.queryString,o=void 0!==c&&c,d=e.groupId,u=x(e),g=(0,s.useState)(function(){return function(e){var n,l=e.defaultValue,s=e.tabValues;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(l){if(!p({value:l,tabValues:s}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+l+'" but none of its children has the corresponding value. Available values are: '+s.map(function(e){return e.value}).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return l}var r=null!=(n=s.find(function(e){return e.default}))?n:s[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:u})}),v=g[0],m=g[1],b=j({queryString:o,groupId:d}),f=b[0],k=b[1],y=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),l=(0,h.Dv)(n),r=l[0],i=l[1],[r,(0,s.useCallback)(function(e){n&&i.set(e)},[n,i])]),T=y[0],S=y[1],C=function(){var e=null!=f?f:T;return p({value:e,tabValues:u})?e:null}();return(0,a.A)(function(){C&&m(C)},[C]),{selectedValue:v,selectValue:(0,s.useCallback)(function(e){if(!p({value:e,tabValues:u}))throw new Error("Can't select invalid tab value="+e);m(e),k(e),S(e)},[k,S,u]),tabValues:u}}var v=l(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=l(4848);function f(e){var n=e.className,l=e.block,s=e.selectedValue,i=e.selectValue,c=e.tabValues,a=[],o=(0,t.a_)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,l=a.indexOf(n),r=c[l].value;r!==s&&(o(n),i(r))},h=function(e){var n,l=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var s,r=a.indexOf(e.currentTarget)+1;l=null!=(s=a[r])?s:a[0];break;case"ArrowLeft":var i,t=a.indexOf(e.currentTarget)-1;l=null!=(i=a[t])?i:a[a.length-1]}null==(n=l)||n.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":l},n),children:c.map(function(e){var n=e.value,l=e.label,i=e.attributes;return(0,b.jsx)("li",Object.assign({role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:function(e){a.push(e)},onKeyDown:h,onClick:d},i,{className:(0,r.A)("tabs__item",m.tabItem,null==i?void 0:i.className,{"tabs__item--active":s===n}),children:null!=l?l:n}),n)})})}function k(e){var n=e.lazy,l=e.children,i=e.selectedValue,t=(Array.isArray(l)?l:[l]).filter(Boolean);if(n){var c=t.find(function(e){return e.props.value===i});return c?(0,s.cloneElement)(c,{className:(0,r.A)("margin-top--md",c.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:t.map(function(e,n){return(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})})})}function y(e){var n=g(e);return(0,b.jsxs)("div",{className:(0,r.A)(i.G.tabs.container,"tabs-container",m.tabList),children:[(0,b.jsx)(f,Object.assign({},n,e)),(0,b.jsx)(k,Object.assign({},n,e))]})}function T(e){var n=(0,v.A)();return(0,b.jsx)(y,Object.assign({},e,{children:u(e.children)}),String(n))}},8137:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>x,frontMatter:()=>a,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"developers/getting-started/local-setup","title":"Full-Stack Local Development Setup","description":"Get the complete DutyCall platform running locally in under 10 minutes.","source":"@site/docs/developers/getting-started/local-setup.md","sourceDirName":"developers/getting-started","slug":"/developers/getting-started/local-setup","permalink":"/developers/getting-started/local-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/dutycall/docs/tree/main/docs/developers/getting-started/local-setup.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Overview","permalink":"/developers/overview"},"next":{"title":"Environment Configuration","permalink":"/developers/getting-started/environment-config"}}');var r=l(4848),i=l(8453),t=l(1470),c=l(9365);const a={sidebar_position:1},o="Full-Stack Local Development Setup",d={},h=[{value:"Quick Start (30 Seconds)",id:"quick-start-30-seconds",level:2},{value:"Architecture Context",id:"architecture-context",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"System Requirements",id:"system-requirements",level:3},{value:"Repository Access",id:"repository-access",level:3},{value:"Backend Setup (5 minutes)",id:"backend-setup-5-minutes",level:2},{value:"1. Install Dependencies",id:"1-install-dependencies",level:3},{value:"2. Configure Environment",id:"2-configure-environment",level:3},{value:"3. Set Up Database",id:"3-set-up-database",level:3},{value:"4. Start Backend Server",id:"4-start-backend-server",level:3},{value:"Frontend Setup (2 minutes)",id:"frontend-setup-2-minutes",level:2},{value:"1. Install Dependencies",id:"1-install-dependencies-1",level:3},{value:"2. Configure Environment",id:"2-configure-environment-1",level:3},{value:"3. Start Frontend Server",id:"3-start-frontend-server",level:3},{value:"The Magic of dev-start.sh",id:"the-magic-of-dev-startsh",level:2},{value:"Automated Setup (Recommended)",id:"automated-setup-recommended",level:3},{value:"Manual Ngrok Setup (If Script Fails)",id:"manual-ngrok-setup-if-script-fails",level:3},{value:"Testing End-to-End",id:"testing-end-to-end",level:2},{value:"1. Login to Frontend",id:"1-login-to-frontend",level:3},{value:"2. Navigate to Queue Dashboard",id:"2-navigate-to-queue-dashboard",level:3},{value:"3. Set Availability",id:"3-set-availability",level:3},{value:"4. Make Test Call",id:"4-make-test-call",level:3},{value:"5. Accept Call",id:"5-accept-call",level:3},{value:"6. End Call",id:"6-end-call",level:3},{value:"Testing Manual Dialer (Outbound)",id:"testing-manual-dialer-outbound",level:3},{value:"Three Terminals Cheat Sheet",id:"three-terminals-cheat-sheet",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Port 8090 Already in Use",id:"port-8090-already-in-use",level:3},{value:"MySQL Connection Refused",id:"mysql-connection-refused",level:3},{value:"Frontend Can&#39;t Connect to Backend",id:"frontend-cant-connect-to-backend",level:3},{value:"Twilio Webhooks 404",id:"twilio-webhooks-404",level:3},{value:"Device Not Registering",id:"device-not-registering",level:3},{value:"Ngrok Session Expired",id:"ngrok-session-expired",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Need Help?",id:"need-help",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"full-stack-local-development-setup",children:"Full-Stack Local Development Setup"})}),"\n",(0,r.jsx)(n.p,{children:"Get the complete DutyCall platform running locally in under 10 minutes."}),"\n","\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.h2,{id:"quick-start-30-seconds",children:"Quick Start (30 Seconds)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Clone the repository\ngit clone git@github.com:chrisberno/dutycall.git\ncd dutycall\n\n# Backend setup\ncd backend\ncomposer install\ncp .env.example .env\n# Edit .env with your database credentials (see below)\nphp artisan key:generate\nmysql -u root -e "CREATE DATABASE dutycall_local CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"\nphp artisan migrate\nphp artisan db:seed --class=RoleTestUsersSeeder\n\n# Frontend setup\ncd ../frontend\nnpm install\ncp .env.example .env.local\n# Edit .env.local with backend URL (see below)\n\n# Start everything (requires 3 terminals)\n# Terminal 1: Backend server\ncd backend && php artisan serve --port=8090\n\n# Terminal 2: Ngrok tunnel + Twilio config (automated)\ncd backend && ./dev-start.sh\n\n# Terminal 3: Frontend server\ncd frontend && npm run dev\n'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"You're ready!"})," Open ",(0,r.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"})," and login with ",(0,r.jsx)(n.code,{children:"agent@dutycall.net"})," / ",(0,r.jsx)(n.code,{children:"password"})]})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsx)(n.h2,{id:"architecture-context",children:"Architecture Context"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Repository"}),": Monorepo with tightly coupled frontend/backend"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"backend/"})," - Laravel 11 API (PHP 8.2+, MySQL, Sanctum)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"frontend/"})," - Next.js 15 (React, TypeScript, TailwindCSS)"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Patterns"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auth"}),": Sanctum Bearer tokens (not sessions)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API"}),": Frontend \u2192 Backend REST (localhost:8090)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Twilio"}),": WebRTC + TwiML webhooks (ngrok required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Environments"}),": Local (MySQL + ngrok) vs Production (PostgreSQL + Railway)"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"TwiML Routing"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$url = env('NGROK_URL', env('APP_URL')) . '/api/callback';\n"})}),(0,r.jsxs)(n.p,{children:["Local: ",(0,r.jsx)(n.code,{children:"NGROK_URL"})," \u2192 ngrok \u2192 laptop\nProduction: ",(0,r.jsx)(n.code,{children:"APP_URL"})," \u2192 Railway (no ",(0,r.jsx)(n.code,{children:"NGROK_URL"})," set)"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source Files"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"backend/README.md"})," - Technical reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"backend/CLAUDE.md"})," - Known issues, testing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"frontend/CLAUDE.md"})," - Hooks, API integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"backend/dev-start.sh"})," - Automated ngrok setup"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test Accounts"})," (password: ",(0,r.jsx)(n.code,{children:"password"}),"):"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"super@dutycall.net"})," - super_admin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"admin@dutycall.net"})," - account_admin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"manager@dutycall.net"})," - dept_manager"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agent@dutycall.net"})," - agent"]}),"\n"]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.h3,{id:"system-requirements",children:"System Requirements"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required Software:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PHP"}),": 8.2+ with extensions (BCMath, Ctype, Fileinfo, JSON, Mbstring, OpenSSL, PDO, Tokenizer, XML)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Composer"}),": 2.x"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node.js"}),": 18+"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MySQL"}),": 8.0+ (or MariaDB 10.3+)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ngrok"}),": Latest version"]}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"macOS Installation:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"brew install php@8.2 mysql composer node ngrok\nbrew services start mysql\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Ubuntu/Debian Installation:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install php8.2 php8.2-mysql php8.2-mbstring php8.2-xml composer nodejs npm mysql-server\nsnap install ngrok\nsudo systemctl start mysql\n"})})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dependencies"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PHP 8.2+ (Laravel 11 requirement)"}),"\n",(0,r.jsx)(n.li,{children:"MySQL 8.0+ (local) / PostgreSQL (production)"}),"\n",(0,r.jsx)(n.li,{children:"Node.js 18+ (Next.js 15 ESM support)"}),"\n",(0,r.jsx)(n.li,{children:"Composer 2.x"}),"\n",(0,r.jsx)(n.li,{children:"Ngrok (webhook tunneling)"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database Schema"}),": ",(0,r.jsx)(n.code,{children:"backend/database/migrations/"})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"users"})," - Sanctum auth, roles"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"campaigns"})," - Outbound campaigns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"contacts"})," - Contact database"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"queue_lists"})," - Inbound queue"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"twilio_call_logs"})," - Call history"]}),"\n"]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"repository-access",children:"Repository Access"}),"\n",(0,r.jsxs)(n.p,{children:["This is a ",(0,r.jsx)(n.strong,{children:"private repository"}),". To clone:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Access"}),": Contact CEO for GitHub collaborator access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure Auth"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSH (recommended)"}),": ",(0,r.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh",children:"Set up SSH key"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTPS"}),": Use ",(0,r.jsx)(n.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens",children:"Personal Access Token"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clone"}),":","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone git@github.com:chrisberno/dutycall.git\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"backend-setup-5-minutes",children:"Backend Setup (5 minutes)"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.h3,{id:"1-install-dependencies",children:"1. Install Dependencies"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd backend\ncomposer install\n"})}),(0,r.jsx)(n.h3,{id:"2-configure-environment",children:"2. Configure Environment"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\nphp artisan key:generate\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Edit ",(0,r.jsx)(n.code,{children:".env"})," with these critical values:"]})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'APP_NAME="Duty Call - Agent Workspace Platform"\nAPP_ENV=local\nAPP_DEBUG=true\nAPP_URL=http://localhost:8090\n\n# Frontend URL (for CORS)\nFRONTEND_URL=http://localhost:3000\n\n# Database Configuration\nDB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=dutycall_local\nDB_USERNAME=root\nDB_PASSWORD=            # Leave empty if no password\n\n# Twilio Configuration (contact project lead for credentials)\nTWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_AUTH_TOKEN=your_auth_token_here\nTWILIO_PHONE_NUMBER_DEV=+18316033889\nTWILIO_PHONE_NUMBER_PROD=+16282373889\n\n# WebRTC Configuration\nTWILIO_API_KEY=SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_API_SECRET=your_api_secret_here\nTWILIO_TWIML_APP_SID=APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_EDGE=ashburn\n\n# Ngrok URL (updated automatically by dev-start.sh)\n# NGROK_URL=https://your-ngrok-url.ngrok-free.app\n'})}),(0,r.jsx)(n.admonition,{title:"Twilio Credentials",type:"info",children:(0,r.jsxs)(n.p,{children:["The credentials above are for the ",(0,r.jsx)(n.strong,{children:"dev environment"})," test number (",(0,r.jsx)(n.code,{children:"+1 831 603 3889"}),"). Contact the project lead for the full Twilio auth token and API secret."]})}),(0,r.jsx)(n.h3,{id:"3-set-up-database",children:"3. Set Up Database"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create database\nmysql -u root -p\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE dutycall_local CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nEXIT;\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run migrations\nphp artisan migrate\n\n# Seed test users\nphp artisan db:seed --class=RoleTestUsersSeeder\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test accounts created"})," (all use password ",(0,r.jsx)(n.code,{children:"password"}),"):"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"super@dutycall.net"})," - Full system access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"admin@dutycall.net"})," - Account management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"manager@dutycall.net"})," - Team oversight, campaigns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agent@dutycall.net"})," - Call handling"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"4-start-backend-server",children:"4. Start Backend Server"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan serve --port=8090\n"})}),(0,r.jsxs)(n.p,{children:["Leave this terminal running. Backend is now at ",(0,r.jsx)(n.code,{children:"http://localhost:8090"})]})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Laravel 11 + Sanctum + Twilio SDK"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment Pattern"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Dual-environment routing\n$url = env('NGROK_URL', env('APP_URL')) . '/api/callback';\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Seeder"}),": ",(0,r.jsx)(n.code,{children:"RoleTestUsersSeeder"})," creates 4 roles\n",(0,r.jsx)(n.strong,{children:"Port"}),": Must use 8090 (hardcoded in frontend)"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Controllers"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TwilioWebhookController"})," - TwiML handlers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DialerController"})," - Campaign execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"VoiceTokenController"})," - WebRTC tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AnalyticsController"})," - Call reporting"]}),"\n"]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"frontend-setup-2-minutes",children:"Frontend Setup (2 minutes)"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.h3,{id:"1-install-dependencies-1",children:"1. Install Dependencies"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd frontend  # (from project root)\nnpm install\n"})}),(0,r.jsx)(n.h3,{id:"2-configure-environment-1",children:"2. Configure Environment"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env.local\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Edit ",(0,r.jsx)(n.code,{children:".env.local"}),":"]})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Backend API URL\nNEXT_PUBLIC_API_URL=http://localhost:8090\n\n# Environment\nNEXT_PUBLIC_APP_ENV=local\n"})}),(0,r.jsx)(n.h3,{id:"3-start-frontend-server",children:"3. Start Frontend Server"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),(0,r.jsxs)(n.p,{children:["Frontend is now at ",(0,r.jsx)(n.code,{children:"http://localhost:3000"})]})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Next.js 15 + App Router + TypeScript"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"API Client"}),": ",(0,r.jsx)(n.code,{children:"src/lib/teleman-api.ts"})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sanctum Bearer tokens"}),"\n",(0,r.jsx)(n.li,{children:"localStorage persistence"}),"\n",(0,r.jsxs)(n.li,{children:["Auto-includes ",(0,r.jsx)(n.code,{children:"Authorization"})," header"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Auth Context"}),": ",(0,r.jsx)(n.code,{children:"src/contexts/AuthContext.tsx"})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Session state management"}),"\n",(0,r.jsx)(n.li,{children:"Login/logout methods"}),"\n",(0,r.jsx)(n.li,{children:"localStorage sync"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Hooks"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useTwilioDevice"})," - WebRTC lifecycle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useInboundQueue"})," - Queue management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useAuth"})," - Auth context"]}),"\n"]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"the-magic-of-dev-startsh",children:"The Magic of dev-start.sh"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsxs)(n.p,{children:["DutyCall uses ",(0,r.jsx)(n.strong,{children:"ngrok"})," to tunnel localhost to the internet for Twilio webhook callbacks."]}),(0,r.jsxs)(n.p,{children:["SPOK automated this with the ",(0,r.jsx)(n.code,{children:"dev-start.sh"})," script."]}),(0,r.jsx)(n.h3,{id:"automated-setup-recommended",children:"Automated Setup (Recommended)"}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.strong,{children:"new terminal"})," (keep backend running):"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd backend\n./dev-start.sh\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What it does automatically:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Starts ngrok tunnel to ",(0,r.jsx)(n.code,{children:"localhost:8090"})]}),"\n",(0,r.jsxs)(n.li,{children:["Extracts ngrok HTTPS URL (e.g., ",(0,r.jsx)(n.code,{children:"https://abc123.ngrok-free.app"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Updates ",(0,r.jsx)(n.code,{children:".env"})," with ",(0,r.jsx)(n.code,{children:"NGROK_URL"})]}),"\n",(0,r.jsxs)(n.li,{children:["Configures Twilio dev number (",(0,r.jsx)(n.code,{children:"+1 831 603 3889"}),") to point to ngrok"]}),"\n",(0,r.jsx)(n.li,{children:"Sets up webhook endpoints (inbound, status, queue)"}),"\n",(0,r.jsxs)(n.li,{children:["Keeps ngrok running (press ",(0,r.jsx)(n.code,{children:"Ctrl+C"})," to stop)"]}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Expected Output:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\ud83d\ude80 Starting DutyCall Development Environment...\n\n\ud83d\udce1 Starting ngrok tunnel...\n\u2705 Ngrok tunnel established: https://71aadcf03d46.ngrok-free.app\n\n\ud83d\udd27 Configuring Twilio dev number (+1 831 603 3889)...\n\u2705 Dev number configured\n   Voice URL: https://71aadcf03d46.ngrok-free.app/api/twilio/inbound\n\n\u2705 Development environment ready!\n\n\ud83d\udcde Dev Number: +1 831 603 3889\n\ud83c\udf10 Ngrok URL: https://71aadcf03d46.ngrok-free.app\n\ud83d\udda5\ufe0f  Backend: http://localhost:8090\n\ud83c\udfa8 Frontend: http://localhost:3000\n\n\ud83d\udca1 Call +1 831 603 3889 to test inbound calls locally\n"})}),(0,r.jsxs)(n.admonition,{title:"Ngrok Session Limits",type:"tip",children:[(0,r.jsx)(n.p,{children:"Free ngrok accounts have session limits. If ngrok stops:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pkill -f ngrok\n./dev-start.sh  # Restart\n"})})]}),(0,r.jsx)(n.h3,{id:"manual-ngrok-setup-if-script-fails",children:"Manual Ngrok Setup (If Script Fails)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Start ngrok\nngrok http 8090\n\n# Copy HTTPS URL from ngrok output\n# Update .env manually:\nNGROK_URL=https://abc123.ngrok-free.app\n\n# Restart backend\npkill -f "php artisan serve"\nphp artisan serve --port=8090\n\n# Configure Twilio Console:\n# Phone Numbers > +1 831 603 3889 > Voice Configuration\n# Voice URL: https://abc123.ngrok-free.app/api/twilio/inbound (POST)\n# Status Callback: https://abc123.ngrok-free.app/api/twilio/status (POST)\n'})})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Expose localhost for Twilio webhooks"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Flow"}),":"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Ngrok: ",(0,r.jsx)(n.code,{children:"https://random.ngrok-free.app"})," \u2192 ",(0,r.jsx)(n.code,{children:"localhost:8090"})]}),"\n",(0,r.jsxs)(n.li,{children:["Script updates ",(0,r.jsx)(n.code,{children:".env"})," with ",(0,r.jsx)(n.code,{children:"NGROK_URL"})]}),"\n",(0,r.jsx)(n.li,{children:"Script calls Twilio API to update phone webhooks"}),"\n",(0,r.jsx)(n.li,{children:"Twilio sends callbacks to ngrok \u2192 laptop"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Script Logic"})," (",(0,r.jsx)(n.code,{children:"dev-start.sh"}),"):"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Extract ngrok URL\nNGROK_URL=$(curl -s http://localhost:4040/api/tunnels | jq -r \'.tunnels[0].public_url\')\n\n# Update .env\nsed -i \'\' "s|NGROK_URL=.*|NGROK_URL=$NGROK_URL|" .env\n\n# Configure Twilio\ncurl -X POST "https://api.twilio.com/2010-04-01/Accounts/$SID/IncomingPhoneNumbers/$NUM.json" \\\n  --data-urlencode "VoiceUrl=$NGROK_URL/api/twilio/inbound"\n'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why"}),": Without ngrok, Twilio can't reach localhost \u2192 calls fail"]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"testing-end-to-end",children:"Testing End-to-End"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.p,{children:"Verify your setup with the inbound call flow:"}),(0,r.jsx)(n.h3,{id:"1-login-to-frontend",children:"1. Login to Frontend"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"http://localhost:3000"})]}),"\n",(0,r.jsxs)(n.li,{children:["Login: ",(0,r.jsx)(n.code,{children:"agent@dutycall.net"})," / ",(0,r.jsx)(n.code,{children:"password"})]}),"\n",(0,r.jsx)(n.li,{children:"Dashboard should load"}),"\n"]}),(0,r.jsx)(n.h3,{id:"2-navigate-to-queue-dashboard",children:"2. Navigate to Queue Dashboard"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Queue"'})," in sidebar"]}),"\n",(0,r.jsx)(n.li,{children:"Queue dashboard loads"}),"\n",(0,r.jsxs)(n.li,{children:["Verify ",(0,r.jsx)(n.strong,{children:"Device Status"}),': "Registered" (green)']}),"\n"]}),(0,r.jsx)(n.h3,{id:"3-set-availability",children:"3. Set Availability"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Available"'})," button"]}),"\n",(0,r.jsx)(n.li,{children:'Status \u2192 "Available" (green)'}),"\n",(0,r.jsx)(n.li,{children:"System polls for calls every 2 seconds"}),"\n"]}),(0,r.jsx)(n.h3,{id:"4-make-test-call",children:"4. Make Test Call"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["From your phone, call ",(0,r.jsx)(n.code,{children:"+1 831 603 3889"})]}),"\n",(0,r.jsx)(n.li,{children:"Hear hold music"}),"\n",(0,r.jsx)(n.li,{children:"Call appears in Queue Dashboard within 2 seconds"}),"\n"]}),(0,r.jsx)(n.h3,{id:"5-accept-call",children:"5. Accept Call"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Accept Call"'})]}),"\n",(0,r.jsx)(n.li,{children:"Browser connects via WebRTC (may prompt for mic)"}),"\n",(0,r.jsx)(n.li,{children:"Within 2-3 seconds, connected"}),"\n",(0,r.jsxs)(n.li,{children:["Verify ",(0,r.jsx)(n.strong,{children:"two-way audio"})]}),"\n"]}),(0,r.jsx)(n.h3,{id:"6-end-call",children:"6. End Call"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Hangup from phone OR click ",(0,r.jsx)(n.strong,{children:'"Hangup"'})]}),"\n",(0,r.jsx)(n.li,{children:"Call disappears from queue"}),"\n",(0,r.jsx)(n.li,{children:"Call logged in history"}),"\n"]}),(0,r.jsx)(n.h3,{id:"testing-manual-dialer-outbound",children:"Testing Manual Dialer (Outbound)"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:'"Dialer"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Manual Dialer"'})," tab"]}),"\n",(0,r.jsx)(n.li,{children:"Enter phone number"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Call"'})]}),"\n",(0,r.jsx)(n.li,{children:"Verify two-way audio"}),"\n"]}),(0,r.jsxs)(n.admonition,{title:"Troubleshooting",type:"tip",children:[(0,r.jsx)(n.p,{children:"If calls don't connect:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Backend on ",(0,r.jsx)(n.code,{children:"localhost:8090"}),"?"]}),"\n",(0,r.jsxs)(n.li,{children:["Ngrok active? ",(0,r.jsx)(n.code,{children:"curl http://localhost:4040/api/tunnels"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".env"})," has correct ",(0,r.jsx)(n.code,{children:"NGROK_URL"}),"?"]}),"\n",(0,r.jsx)(n.li,{children:'Device Status "Registered"?'}),"\n"]})]})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test Flow"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Caller \u2192 Twilio \u2192 Ngrok \u2192 /api/twilio/inbound \u2192 <Enqueue>\n                                                      \u2193\n                                          queue_lists table\n                                                      \u2193\nFrontend polls /api/queue/calls \u2192 Agent accepts\n                                        \u2193\n              Device.connect() \u2192 /api/twilio/agent-dial-queue\n                                        \u2193\n                    <Dial><Queue> \u2192 Twilio bridges calls\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoints"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/twilio/inbound"})," - Enqueue"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/twilio/agent-dial-queue"})," - WebRTC join"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/twilio/dequeue"})," - Cleanup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /api/queue/calls"})," - Frontend polling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /api/queue/accept-call"})," - Trigger dial-in"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"WebRTC Events"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"device.on('registered', () => console.log('Ready'));\ndevice.on('incoming', call => call.accept());\ndevice.on('disconnect', call => console.log('Ended'));\n"})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"three-terminals-cheat-sheet",children:"Three Terminals Cheat Sheet"}),"\n",(0,r.jsx)(n.p,{children:"Keep these running:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Backend Server\ncd backend\nphp artisan serve --port=8090\n\n# Terminal 2: Ngrok + Twilio Config\ncd backend\n./dev-start.sh\n\n# Terminal 3: Frontend Server\ncd frontend\nnpm run dev\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Access Points:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Frontend: ",(0,r.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"})]}),"\n",(0,r.jsxs)(n.li,{children:["Backend: ",(0,r.jsx)(n.a,{href:"http://localhost:8090",children:"http://localhost:8090"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ngrok Dashboard: ",(0,r.jsx)(n.a,{href:"http://localhost:4040",children:"http://localhost:4040"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(t.A,{groupId:"developer-type",children:[(0,r.jsxs)(c.A,{value:"human",label:"\ud83d\udc68\u200d\ud83d\udcbb Human Developer",default:!0,children:[(0,r.jsx)(n.h3,{id:"port-8090-already-in-use",children:"Port 8090 Already in Use"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"lsof -ti:8090 | xargs kill -9\nphp artisan serve --port=8090\n"})}),(0,r.jsx)(n.h3,{id:"mysql-connection-refused",children:"MySQL Connection Refused"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# macOS\nbrew services list\nbrew services start mysql\n\n# Linux\nsudo systemctl status mysql\nsudo systemctl start mysql\n\n# Test\nmysql -u root -p -e "SELECT 1"\n'})}),(0,r.jsx)(n.h3,{id:"frontend-cant-connect-to-backend",children:"Frontend Can't Connect to Backend"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Backend on ",(0,r.jsx)(n.code,{children:"localhost:8090"}),"?"]}),"\n",(0,r.jsxs)(n.li,{children:["Frontend ",(0,r.jsx)(n.code,{children:".env.local"}),": ",(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_API_URL=http://localhost:8090"})]}),"\n",(0,r.jsxs)(n.li,{children:["CORS in ",(0,r.jsx)(n.code,{children:"backend/config/cors.php"})]}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fix:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd backend\nphp artisan cache:clear\nphp artisan config:clear\n"})}),(0,r.jsx)(n.h3,{id:"twilio-webhooks-404",children:"Twilio Webhooks 404"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Backend on port 8090"}),"\n",(0,r.jsxs)(n.li,{children:["Ngrok active: ",(0,r.jsx)(n.code,{children:"curl http://localhost:4040/api/tunnels"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".env"})," has ",(0,r.jsx)(n.code,{children:"NGROK_URL"})]}),"\n",(0,r.jsx)(n.li,{children:"Twilio dev number configured"}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fix:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pkill -f "php artisan serve"\nphp artisan serve --port=8090\n'})}),(0,r.jsx)(n.h3,{id:"device-not-registering",children:"Device Not Registering"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Browser console errors"}),"\n",(0,r.jsx)(n.li,{children:"Microphone permissions"}),"\n",(0,r.jsxs)(n.li,{children:["Twilio credentials in ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsxs)(n.li,{children:["Token endpoint: ",(0,r.jsx)(n.code,{children:"http://localhost:8090/api/voice/token"})]}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Debug:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8090/api/voice/token \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"recording_enabled": false}\'\n'})}),(0,r.jsx)(n.h3,{id:"ngrok-session-expired",children:"Ngrok Session Expired"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pkill -f ngrok\n./dev-start.sh\n"})})]}),(0,r.jsxs)(c.A,{value:"ai",label:"\ud83e\udd16 AI Agent",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Issues"}),":"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Port conflicts: ",(0,r.jsx)(n.code,{children:"lsof -ti:8090 | xargs kill -9"})]}),"\n",(0,r.jsx)(n.li,{children:"Database: Check MySQL service"}),"\n",(0,r.jsxs)(n.li,{children:["CORS: Verify ",(0,r.jsx)(n.code,{children:"backend/config/cors.php"})]}),"\n",(0,r.jsxs)(n.li,{children:["Webhook 404s: Restart backend after ",(0,r.jsx)(n.code,{children:".env"})," changes"]}),"\n",(0,r.jsx)(n.li,{children:"WebRTC: Check Twilio credentials"}),"\n",(0,r.jsxs)(n.li,{children:["Ngrok: ",(0,r.jsx)(n.code,{children:"pkill -f ngrok && ./dev-start.sh"})]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Tools"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ngrok: ",(0,r.jsx)(n.code,{children:"http://localhost:4040"})," - Webhook inspector"]}),"\n",(0,r.jsxs)(n.li,{children:["Laravel logs: ",(0,r.jsx)(n.code,{children:"tail -f backend/storage/logs/laravel.log"})]}),"\n",(0,r.jsx)(n.li,{children:"Browser: DevTools Network tab"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Critical Fixes"})," (do not overwrite):"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AnalyticsController.php:691,716"})," - Schema fixes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"config/cors.php:18"})," - Analytics CORS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TwilioWebhookController.php:304-310"})," - Orphan prevention"]}),"\n"]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"Now that you're running locally:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Explore Roles"})," - Login as different users"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Campaigns"})," - Create and run campaigns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review API"})," - ",(0,r.jsx)(n.a,{href:"/developers/api-reference",children:"API Reference"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production Config"})," - ",(0,r.jsx)(n.a,{href:"/developers/getting-started/environment-config",children:"Environment Configuration"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backend"}),": ",(0,r.jsx)(n.code,{children:"backend/README.md"}),", ",(0,r.jsx)(n.code,{children:"backend/CLAUDE.md"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Frontend"}),": ",(0,r.jsx)(n.code,{children:"frontend/CLAUDE.md"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webhooks"}),": Ngrok dashboard at ",(0,r.jsx)(n.code,{children:"http://localhost:4040"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Questions"}),": Contact project lead"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Built with Laravel 11, Next.js 15, and Twilio Programmable Voice"})})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>c});var s=l(6540);const r={},i=s.createContext(r);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(i.Provider,{value:n},e.children)}},9365:(e,n,l)=>{l.d(n,{A:()=>t});l(6540);var s=l(4164);const r={tabItem:"tabItem_Ymn6"};var i=l(4848);function t(e){var n=e.children,l=e.hidden,t=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,t),hidden:l,children:n})}}}]);