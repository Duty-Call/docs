"use strict";(self.webpackChunkdocs_dutycall=self.webpackChunkdocs_dutycall||[]).push([[504],{3439:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>x,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"developers/deployment/backend/railway","title":"Backend Deployment to Railway","description":"This guide provides step-by-step instructions for deploying the DutyCall Laravel backend to Railway with MySQL database.","source":"@site/docs/developers/deployment/backend/railway.md","sourceDirName":"developers/deployment/backend","slug":"/developers/deployment/backend/railway","permalink":"/developers/deployment/backend/railway","draft":false,"unlisted":false,"editUrl":"https://github.com/dutycall/docs/tree/main/docs/developers/deployment/backend/railway.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"railway","title":"Backend Deployment to Railway","sidebar_label":"Railway","sidebar_position":1},"sidebar":"docs","previous":{"title":"WebRTC Patterns","permalink":"/developers/webrtc-patterns"}}');var l=i(4848),r=i(8453);const a={id:"railway",title:"Backend Deployment to Railway",sidebar_label:"Railway",sidebar_position:1},d="Backend Deployment to Railway",o={},t=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Required Accounts",id:"required-accounts",level:3},{value:"Required Credentials Checklist",id:"required-credentials-checklist",level:3},{value:"Step 1: Prepare Your Repository",id:"step-1-prepare-your-repository",level:2},{value:"1.1 Verify Backend Structure",id:"11-verify-backend-structure",level:3},{value:"1.2 Create Dockerfile",id:"12-create-dockerfile",level:3},{value:"1.3 Create .dockerignore",id:"13-create-dockerignore",level:3},{value:"1.4 Push to GitHub",id:"14-push-to-github",level:3},{value:"Step 2: Create Railway Project",id:"step-2-create-railway-project",level:2},{value:"2.1 Login to Railway",id:"21-login-to-railway",level:3},{value:"2.2 Connect GitHub Repository",id:"22-connect-github-repository",level:3},{value:"2.3 Configure Service Root Directory",id:"23-configure-service-root-directory",level:3},{value:"Step 3: Add MySQL Database",id:"step-3-add-mysql-database",level:2},{value:"3.1 Add Database to Project",id:"31-add-database-to-project",level:3},{value:"3.2 Link Database to Backend",id:"32-link-database-to-backend",level:3},{value:"Step 4: Configure Environment Variables",id:"step-4-configure-environment-variables",level:2},{value:"4.1 Generate Laravel APP_KEY",id:"41-generate-laravel-app_key",level:3},{value:"4.2 Add Variables via Railway Dashboard",id:"42-add-variables-via-railway-dashboard",level:3},{value:"App Configuration",id:"app-configuration",level:4},{value:"Database Configuration",id:"database-configuration",level:4},{value:"Twilio Configuration",id:"twilio-configuration",level:4},{value:"Google OAuth Configuration",id:"google-oauth-configuration",level:4},{value:"Laravel Drivers &amp; Session",id:"laravel-drivers--session",level:4},{value:"Step 5: Deploy Backend",id:"step-5-deploy-backend",level:2},{value:"5.1 Trigger Deployment",id:"51-trigger-deployment",level:3},{value:"5.2 Monitor Deployment",id:"52-monitor-deployment",level:3},{value:"5.3 Check Deployment Logs",id:"53-check-deployment-logs",level:3},{value:"Step 6: Generate Public Domain",id:"step-6-generate-public-domain",level:2},{value:"6.1 Create Railway Domain",id:"61-create-railway-domain",level:3},{value:"6.2 Update Environment Variables with Domain",id:"62-update-environment-variables-with-domain",level:3},{value:"6.3 Update After Frontend Deployment",id:"63-update-after-frontend-deployment",level:3},{value:"Step 7: Update Google OAuth",id:"step-7-update-google-oauth",level:2},{value:"7.1 Add Railway URL to Google Console",id:"71-add-railway-url-to-google-console",level:3},{value:"Step 8: Update Twilio Webhooks",id:"step-8-update-twilio-webhooks",level:2},{value:"8.1 Configure TwiML App",id:"81-configure-twiml-app",level:3},{value:"8.2 Configure Phone Number",id:"82-configure-phone-number",level:3},{value:"Step 9: Verify Deployment",id:"step-9-verify-deployment",level:2},{value:"9.1 Test Backend Health",id:"91-test-backend-health",level:3},{value:"9.2 Check Database Connection",id:"92-check-database-connection",level:3},{value:"9.3 Create Test Users (Optional)",id:"93-create-test-users-optional",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Build Fails: Missing PHP Extensions",id:"build-fails-missing-php-extensions",level:3},{value:"Server Returns 502 Bad Gateway",id:"server-returns-502-bad-gateway",level:3},{value:"Migration Errors: Table Already Exists",id:"migration-errors-table-already-exists",level:3},{value:"Session/CSRF Token Errors",id:"sessioncsrf-token-errors",level:3},{value:"Google OAuth Fails",id:"google-oauth-fails",level:3},{value:"Twilio Webhooks Not Receiving Calls",id:"twilio-webhooks-not-receiving-calls",level:3},{value:"Railway CLI (Optional)",id:"railway-cli-optional",level:2},{value:"Install Railway CLI",id:"install-railway-cli",level:3},{value:"Authenticate",id:"authenticate",level:3},{value:"Link Project",id:"link-project",level:3},{value:"Useful Commands",id:"useful-commands",level:3},{value:"Redeployment",id:"redeployment",level:2},{value:"Auto-Deploy (Recommended)",id:"auto-deploy-recommended",level:3},{value:"Manual Redeploy",id:"manual-redeploy",level:3},{value:"Zero-Downtime Deployments",id:"zero-downtime-deployments",level:3},{value:"Environment Variable Reference",id:"environment-variable-reference",level:2},{value:"Complete List of Required Variables",id:"complete-list-of-required-variables",level:3},{value:"Variable Format Guide",id:"variable-format-guide",level:3},{value:"Cost Tracking",id:"cost-tracking",level:2},{value:"Railway Pricing",id:"railway-pricing",level:3},{value:"Twilio Costs",id:"twilio-costs",level:3},{value:"Security Checklist",id:"security-checklist",level:2},{value:"Monitoring &amp; Maintenance",id:"monitoring--maintenance",level:2},{value:"View Logs",id:"view-logs",level:3},{value:"Check Deployment Status",id:"check-deployment-status",level:3},{value:"Database Monitoring",id:"database-monitoring",level:3},{value:"Database Backup",id:"database-backup",level:3},{value:"Update Dependencies",id:"update-dependencies",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2},{value:"Railway Documentation",id:"railway-documentation",level:3},{value:"Laravel Documentation",id:"laravel-documentation",level:3},{value:"Docker Resources",id:"docker-resources",level:3},{value:"Third-Party Services",id:"third-party-services",level:3},{value:"Support",id:"support",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"backend-deployment-to-railway",children:"Backend Deployment to Railway"})}),"\n",(0,l.jsx)(n.admonition,{title:"For Developers & AI Agents",type:"info",children:(0,l.jsx)(n.p,{children:"This guide provides step-by-step instructions for deploying the DutyCall Laravel backend to Railway with MySQL database."})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Deploy the DutyCall Laravel backend to Railway with automatic CI/CD from GitHub, managed MySQL database, and SSL-enabled public domain."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Time to Deploy:"})," ~45 minutes (first time)\n",(0,l.jsx)(n.strong,{children:"Difficulty:"})," Intermediate\n",(0,l.jsx)(n.strong,{children:"Prerequisites:"})," Git, GitHub account, Railway account, Twilio account, Google Cloud OAuth"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What Railway Provides:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\ud83d\ude80 Automatic deployment from GitHub"}),"\n",(0,l.jsx)(n.li,{children:"\ud83d\uddc4\ufe0f Managed MySQL database"}),"\n",(0,l.jsx)(n.li,{children:"\ud83d\udd12 Free SSL certificates"}),"\n",(0,l.jsx)(n.li,{children:"\ud83d\udcca Built-in monitoring and logs"}),"\n",(0,l.jsx)(n.li,{children:"\ud83d\udcb0 Free tier: $5/month credit + 30 days trial"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(n.h3,{id:"required-accounts",children:"Required Accounts"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. Railway Account"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Sign up: ",(0,l.jsx)(n.a,{href:"https://railway.app",children:"https://railway.app"})]}),"\n",(0,l.jsx)(n.li,{children:"Connect GitHub account for auto-deployment"}),"\n",(0,l.jsx)(n.li,{children:"Free tier includes: $5/month credit, 30 days trial"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. GitHub Account"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Repository must be pushed to GitHub"}),"\n",(0,l.jsx)(n.li,{children:"Railway deploys automatically on push to main branch"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"3. Twilio Account"})," (for voice features)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Account SID and Auth Token"}),"\n",(0,l.jsx)(n.li,{children:"API Key and API Secret"}),"\n",(0,l.jsx)(n.li,{children:"TwiML App SID"}),"\n",(0,l.jsx)(n.li,{children:"Phone number"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"4. Google Cloud Console"})," (for OAuth)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OAuth Client ID and Secret"}),"\n",(0,l.jsx)(n.li,{children:"Authorized redirect URIs configured"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"required-credentials-checklist",children:"Required Credentials Checklist"}),"\n",(0,l.jsx)(n.p,{children:"Gather these credentials before starting:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Twilio Credentials\nTWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_PHONE_NUMBER=+1xxxxxxxxxx\nTWILIO_API_KEY=SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_API_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_TWIML_APP_SID=APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\n# Google OAuth Credentials\nGOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,l.jsx)(n.admonition,{title:"Where to Find Credentials",type:"tip",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Twilio"}),": Console \u2192 Account \u2192 API Keys & Tokens"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Google"}),": Cloud Console \u2192 APIs & Services \u2192 Credentials"]}),"\n"]})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-1-prepare-your-repository",children:"Step 1: Prepare Your Repository"}),"\n",(0,l.jsx)(n.h3,{id:"11-verify-backend-structure",children:"1.1 Verify Backend Structure"}),"\n",(0,l.jsx)(n.p,{children:"Ensure your backend directory contains:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"backend/\n\u251c\u2500\u2500 Dockerfile              # \u2190 Required\n\u251c\u2500\u2500 .dockerignore          # \u2190 Required\n\u251c\u2500\u2500 composer.json\n\u251c\u2500\u2500 composer.lock\n\u251c\u2500\u2500 artisan\n\u251c\u2500\u2500 app/\n\u251c\u2500\u2500 config/\n\u251c\u2500\u2500 database/\n\u2514\u2500\u2500 routes/\n"})}),"\n",(0,l.jsx)(n.h3,{id:"12-create-dockerfile",children:"1.2 Create Dockerfile"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"backend/Dockerfile"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:"FROM php:8.3-cli\n\n# Install system dependencies\nRUN apt-get update && apt-get install -y \\\n    git \\\n    curl \\\n    libpng-dev \\\n    libonig-dev \\\n    libxml2-dev \\\n    libzip-dev \\\n    zip \\\n    unzip\n\n# Install PHP extensions\nRUN docker-php-ext-install pdo_mysql mbstring exif pcntl bcmath gd zip\n\n# Install Composer\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\n\n# Set working directory\nWORKDIR /app\n\n# Copy application files\nCOPY . .\n\n# Install dependencies\nRUN composer install --no-dev --optimize-autoloader --no-interaction\n\n# Expose port\nEXPOSE 8080\n\n# Start command (runs migrations then starts server)\nCMD php artisan migrate --force || true && php artisan serve --host=0.0.0.0 --port=${PORT:-8080}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uses PHP 8.3 CLI"}),"\n",(0,l.jsx)(n.li,{children:"Installs all required extensions"}),"\n",(0,l.jsx)(n.li,{children:"Runs migrations automatically on startup"}),"\n",(0,l.jsx)(n.li,{children:"Serves on port 8080 (Railway standard)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"13-create-dockerignore",children:"1.3 Create .dockerignore"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"backend/.dockerignore"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:".git\n.env\n.env.*\nnode_modules\nvendor\nstorage/logs/*\nstorage/framework/cache/*\nstorage/framework/sessions/*\nstorage/framework/views/*\nbootstrap/cache/*\n.phpunit.result.cache\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Purpose:"})," Exclude unnecessary files from Docker build (faster builds, smaller images)"]}),"\n",(0,l.jsx)(n.h3,{id:"14-push-to-github",children:"1.4 Push to GitHub"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'cd /path/to/dutycall\ngit add backend/Dockerfile backend/.dockerignore\ngit commit -m "Add Railway deployment configuration"\ngit push origin main\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-2-create-railway-project",children:"Step 2: Create Railway Project"}),"\n",(0,l.jsx)(n.h3,{id:"21-login-to-railway",children:"2.1 Login to Railway"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.a,{href:"https://railway.app",children:"https://railway.app"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Start a New Project"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:'"Deploy from GitHub repo"'})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"22-connect-github-repository",children:"2.2 Connect GitHub Repository"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Deploy from GitHub repo"'})]}),"\n",(0,l.jsx)(n.li,{children:"Authorize Railway to access your GitHub account"}),"\n",(0,l.jsxs)(n.li,{children:["Select your repository (e.g., ",(0,l.jsx)(n.code,{children:"yourname/dutycall"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"Railway detects the repository automatically"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"23-configure-service-root-directory",children:"2.3 Configure Service Root Directory"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Railway creates a service automatically"}),"\n",(0,l.jsx)(n.li,{children:"Click on the service card"}),"\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.strong,{children:"Settings"})," tab"]}),"\n",(0,l.jsxs)(n.li,{children:["Set ",(0,l.jsx)(n.strong,{children:"Root Directory"})," to: ",(0,l.jsx)(n.code,{children:"backend"})]}),"\n",(0,l.jsx)(n.li,{children:"Railway will detect and use your Dockerfile"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why set root directory?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If your repo has both frontend and backend, Railway needs to know where the backend code is"}),"\n",(0,l.jsxs)(n.li,{children:["Setting root to ",(0,l.jsx)(n.code,{children:"backend"})," tells Railway to build from that directory"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-3-add-mysql-database",children:"Step 3: Add MySQL Database"}),"\n",(0,l.jsx)(n.h3,{id:"31-add-database-to-project",children:"3.1 Add Database to Project"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["In Railway dashboard, click ",(0,l.jsx)(n.strong,{children:'"+ New"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:'"Database"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Choose ",(0,l.jsx)(n.strong,{children:'"Add MySQL"'})]}),"\n",(0,l.jsx)(n.li,{children:"Railway provisions MySQL automatically (~1 minute)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"32-link-database-to-backend",children:"3.2 Link Database to Backend"}),"\n",(0,l.jsx)(n.p,{children:"Railway auto-creates these environment variables in the MySQL service:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MYSQLHOST"})," - Database host"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MYSQLPORT"})," - Database port (usually 3306)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MYSQLDATABASE"})," - Database name"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MYSQLUSER"})," - Database username"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MYSQLPASSWORD"})," - Database password"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"You'll reference these in Step 4"})," using Railway's variable syntax: ",(0,l.jsx)(n.code,{children:"${{MySQL.MYSQLHOST}}"})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-4-configure-environment-variables",children:"Step 4: Configure Environment Variables"}),"\n",(0,l.jsx)(n.h3,{id:"41-generate-laravel-app_key",children:"4.1 Generate Laravel APP_KEY"}),"\n",(0,l.jsx)(n.p,{children:"Run locally to generate an application key:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd /path/to/backend\nphp artisan key:generate --show\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Output:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"base64:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Copy this entire string (including ",(0,l.jsx)(n.code,{children:"base64:"})," prefix)."]}),"\n",(0,l.jsx)(n.h3,{id:"42-add-variables-via-railway-dashboard",children:"4.2 Add Variables via Railway Dashboard"}),"\n",(0,l.jsxs)(n.p,{children:["Navigate to your backend service \u2192 ",(0,l.jsx)(n.strong,{children:"Variables"})," tab \u2192 Click ",(0,l.jsx)(n.strong,{children:'"New Variable"'})]}),"\n",(0,l.jsx)(n.p,{children:"Add each variable below:"}),"\n",(0,l.jsx)(n.h4,{id:"app-configuration",children:"App Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"APP_NAME=DutyCall\nAPP_ENV=production\nAPP_DEBUG=false\nAPP_KEY=base64:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Important:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"APP_DEBUG=false"})," in production (security)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"APP_KEY"})," must be the output from ",(0,l.jsx)(n.code,{children:"php artisan key:generate --show"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"DB_CONNECTION=mysql\nDB_HOST=${{MySQL.MYSQLHOST}}\nDB_PORT=${{MySQL.MYSQLPORT}}\nDB_DATABASE=${{MySQL.MYSQLDATABASE}}\nDB_USERNAME=${{MySQL.MYSQLUSER}}\nDB_PASSWORD=${{MySQL.MYSQLPASSWORD}}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Railway Variable References:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${{MySQL.MYSQLHOST}}"})," automatically references the MySQL service's ",(0,l.jsx)(n.code,{children:"MYSQLHOST"})," variable"]}),"\n",(0,l.jsx)(n.li,{children:"Railway updates these automatically if database credentials change"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"twilio-configuration",children:"Twilio Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_PHONE_NUMBER=+1xxxxxxxxxx\nTWILIO_API_KEY=SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_API_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_TWIML_APP_SID=APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_EDGE=ashburn\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Get these from:"})," Twilio Console \u2192 Account \u2192 API Keys & Tokens"]}),"\n",(0,l.jsx)(n.h4,{id:"google-oauth-configuration",children:"Google OAuth Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Get these from:"})," Google Cloud Console \u2192 APIs & Services \u2192 Credentials"]}),"\n",(0,l.jsx)(n.h4,{id:"laravel-drivers--session",children:"Laravel Drivers & Session"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"SESSION_DRIVER=database\nQUEUE_CONNECTION=database\nBROADCAST_DRIVER=log\nCACHE_DRIVER=file\nFILESYSTEM_DISK=local\nLOG_CHANNEL=stack\nLOG_LEVEL=debug\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why these settings?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"SESSION_DRIVER=database"})," - Store sessions in MySQL (required for Sanctum)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QUEUE_CONNECTION=database"})," - Use database for background jobs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"LOG_LEVEL=debug"})," - Verbose logging for troubleshooting"]}),"\n"]}),"\n",(0,l.jsxs)(n.admonition,{title:"Update After Domain Generation",type:"caution",children:[(0,l.jsxs)(n.p,{children:["You'll add more variables in ",(0,l.jsx)(n.strong,{children:"Step 6"})," after Railway generates your public domain:"]}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"APP_URL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"FRONTEND_URL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SANCTUM_STATEFUL_DOMAINS"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SESSION_DOMAIN"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"GOOGLE_CALLBACK_URL"})}),"\n"]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-5-deploy-backend",children:"Step 5: Deploy Backend"}),"\n",(0,l.jsx)(n.h3,{id:"51-trigger-deployment",children:"5.1 Trigger Deployment"}),"\n",(0,l.jsx)(n.p,{children:"Railway automatically deploys when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 You push to GitHub (auto-deploy enabled by default)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 You change environment variables"}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 You click ",(0,l.jsx)(n.strong,{children:'"Redeploy"'})," button"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"First deployment starts immediately"})," after adding environment variables."]}),"\n",(0,l.jsx)(n.h3,{id:"52-monitor-deployment",children:"5.2 Monitor Deployment"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.strong,{children:"Deployments"})," tab in your service"]}),"\n",(0,l.jsx)(n.li,{children:"Click on the active deployment (status: Building or Running)"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"View Logs"'})]}),"\n",(0,l.jsx)(n.li,{children:"Wait for successful startup message"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected deployment time:"})," 3-5 minutes"]}),"\n",(0,l.jsx)(n.h3,{id:"53-check-deployment-logs",children:"5.3 Check Deployment Logs"}),"\n",(0,l.jsx)(n.p,{children:"Look for these success indicators in logs:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u2705 Building Docker image\n\u2705 Installing Composer dependencies\n\u2705 Running migrations: php artisan migrate --force\n\u2705 Server started: INFO  Server running on [http://0.0.0.0:8080]\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"If deployment fails"}),", check logs for errors and see ",(0,l.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," section."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-6-generate-public-domain",children:"Step 6: Generate Public Domain"}),"\n",(0,l.jsx)(n.h3,{id:"61-create-railway-domain",children:"6.1 Create Railway Domain"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Navigate to your backend service"}),"\n",(0,l.jsxs)(n.li,{children:["Go to ",(0,l.jsx)(n.strong,{children:"Settings"})," tab"]}),"\n",(0,l.jsxs)(n.li,{children:["Scroll to ",(0,l.jsx)(n.strong,{children:"Networking"})," section"]}),"\n",(0,l.jsxs)(n.li,{children:['Under "Public Networking", enter port: ',(0,l.jsx)(n.code,{children:"8080"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Generate Domain"'})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Railway provides a URL like:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"https://dutycall-backend-production.up.railway.app\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Copy this URL"})," - you'll need it for the next steps."]}),"\n",(0,l.jsx)(n.h3,{id:"62-update-environment-variables-with-domain",children:"6.2 Update Environment Variables with Domain"}),"\n",(0,l.jsx)(n.p,{children:"Add these new variables using your Railway domain:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"APP_URL=https://dutycall-backend-production.up.railway.app\nFRONTEND_URL=https://your-frontend-url.vercel.app\nGOOGLE_CALLBACK_URL=https://dutycall-backend-production.up.railway.app/auth/google/callback\nSANCTUM_STATEFUL_DOMAINS=dutycall-backend-production.up.railway.app,your-frontend-url.vercel.app\nSESSION_DOMAIN=dutycall-backend-production.up.railway.app\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Replace ",(0,l.jsx)(n.code,{children:"dutycall-backend-production.up.railway.app"})," with your actual Railway domain"]}),"\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"FRONTEND_URL"})," after deploying frontend (Step 6.3)"]}),"\n",(0,l.jsxs)(n.li,{children:["No ",(0,l.jsx)(n.code,{children:"https://"})," in ",(0,l.jsx)(n.code,{children:"SANCTUM_STATEFUL_DOMAINS"})," or ",(0,l.jsx)(n.code,{children:"SESSION_DOMAIN"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"63-update-after-frontend-deployment",children:"6.3 Update After Frontend Deployment"}),"\n",(0,l.jsx)(n.p,{children:"After deploying your frontend to Vercel:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"FRONTEND_URL"})," with your Vercel URL"]}),"\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"SANCTUM_STATEFUL_DOMAINS"})," to include both backend and frontend domains"]}),"\n",(0,l.jsx)(n.li,{children:"Railway will automatically redeploy"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-7-update-google-oauth",children:"Step 7: Update Google OAuth"}),"\n",(0,l.jsx)(n.h3,{id:"71-add-railway-url-to-google-console",children:"7.1 Add Railway URL to Google Console"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to: ",(0,l.jsx)(n.a,{href:"https://console.cloud.google.com/apis/credentials",children:"https://console.cloud.google.com/apis/credentials"})]}),"\n",(0,l.jsxs)(n.li,{children:["Find your ",(0,l.jsx)(n.strong,{children:"OAuth 2.0 Client ID"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Edit"})]}),"\n",(0,l.jsxs)(n.li,{children:["Add to ",(0,l.jsx)(n.strong,{children:"Authorized JavaScript origins:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"https://dutycall-backend-production.up.railway.app\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Add to ",(0,l.jsx)(n.strong,{children:"Authorized redirect URIs:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"https://dutycall-backend-production.up.railway.app/auth/google/callback\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Save"'})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why this is required:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Google only allows OAuth callbacks from whitelisted URLs"}),"\n",(0,l.jsxs)(n.li,{children:["Must match ",(0,l.jsx)(n.code,{children:"GOOGLE_CALLBACK_URL"})," environment variable exactly"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-8-update-twilio-webhooks",children:"Step 8: Update Twilio Webhooks"}),"\n",(0,l.jsx)(n.h3,{id:"81-configure-twiml-app",children:"8.1 Configure TwiML App"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to Twilio Console: ",(0,l.jsx)(n.a,{href:"https://console.twilio.com",children:"https://console.twilio.com"})]}),"\n",(0,l.jsxs)(n.li,{children:["Navigate to: ",(0,l.jsx)(n.strong,{children:"Voice"})," \u2192 ",(0,l.jsx)(n.strong,{children:"TwiML"})," \u2192 ",(0,l.jsx)(n.strong,{children:"TwiML Apps"})]}),"\n",(0,l.jsx)(n.li,{children:"Select your TwiML App"}),"\n",(0,l.jsxs)(n.li,{children:["Set ",(0,l.jsx)(n.strong,{children:"Voice Request URL:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"https://dutycall-backend-production.up.railway.app/api/twilio/agent-dial-queue\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Set method to ",(0,l.jsx)(n.strong,{children:"HTTP POST"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Save"'})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"82-configure-phone-number",children:"8.2 Configure Phone Number"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to: ",(0,l.jsx)(n.strong,{children:"Phone Numbers"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Active Numbers"})]}),"\n",(0,l.jsx)(n.li,{children:"Select your DutyCall phone number"}),"\n",(0,l.jsxs)(n.li,{children:["Scroll to ",(0,l.jsx)(n.strong,{children:"Voice Configuration"})]}),"\n",(0,l.jsxs)(n.li,{children:["Set ",(0,l.jsx)(n.strong,{children:"A Call Comes In"})," webhook:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"https://dutycall-backend-production.up.railway.app/api/twilio/inbound\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Set method to ",(0,l.jsx)(n.strong,{children:"HTTP POST"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Save"'})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why this is required:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Twilio sends incoming call events to your backend"}),"\n",(0,l.jsx)(n.li,{children:"Backend processes calls and returns TwiML instructions"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"step-9-verify-deployment",children:"Step 9: Verify Deployment"}),"\n",(0,l.jsx)(n.h3,{id:"91-test-backend-health",children:"9.1 Test Backend Health"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://dutycall-backend-production.up.railway.app/\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected response:"})," HTML 404 page (this means Laravel is running correctly)"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why 404 is good:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Laravel doesn't have a route for ",(0,l.jsx)(n.code,{children:"/"})," (root)"]}),"\n",(0,l.jsx)(n.li,{children:"Seeing Laravel's 404 page confirms the server is running"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"92-check-database-connection",children:"9.2 Check Database Connection"}),"\n",(0,l.jsx)(n.p,{children:"View deployment logs to verify database connection:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# If you installed Railway CLI:\nrailway logs\n\n# Or check in Railway dashboard:\n# Service \u2192 Deployments \u2192 Latest \u2192 View Logs\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Look for:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Migration table created successfully.\nMigrating: 2024_01_01_000000_create_users_table\nMigrated:  2024_01_01_000000_create_users_table\n"})}),"\n",(0,l.jsx)(n.h3,{id:"93-create-test-users-optional",children:"9.3 Create Test Users (Optional)"}),"\n",(0,l.jsx)(n.p,{children:"Run seeder to create test accounts:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Using Railway CLI:\nrailway run php artisan db:seed --class=RoleTestUsersSeeder\n\n# Or via Railway dashboard:\n# Service \u2192 Settings \u2192 Run Command\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Creates test accounts:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"super@dutycall.net"})," / ",(0,l.jsx)(n.code,{children:"password"})," (super_admin)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"admin@dutycall.net"})," / ",(0,l.jsx)(n.code,{children:"password"})," (account_admin)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"manager@dutycall.net"})," / ",(0,l.jsx)(n.code,{children:"password"})," (dept_manager)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"agent@dutycall.net"})," / ",(0,l.jsx)(n.code,{children:"password"})," (agent)"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Remove Test Users in Production",type:"caution",children:(0,l.jsx)(n.p,{children:"These test accounts should be removed or passwords changed before production use."})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"build-fails-missing-php-extensions",children:"Build Fails: Missing PHP Extensions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ext-zip * -> it is missing from your system\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Cause:"})," Dockerfile doesn't include required PHP extension"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution:"})," Ensure Dockerfile includes all extensions:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:"RUN docker-php-ext-install pdo_mysql mbstring exif pcntl bcmath gd zip\n"})}),"\n",(0,l.jsx)(n.h3,{id:"server-returns-502-bad-gateway",children:"Server Returns 502 Bad Gateway"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Possible Causes:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Database not connected"}),"\n",(0,l.jsxs)(n.li,{children:["Missing ",(0,l.jsx)(n.code,{children:"APP_KEY"})]}),"\n",(0,l.jsx)(n.li,{children:"Server failed to start"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Debugging Steps:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Check Railway logs: Service \u2192 Deployments \u2192 View Logs"}),"\n",(0,l.jsxs)(n.li,{children:["Verify database variables are linked: ",(0,l.jsx)(n.code,{children:"DB_HOST=${{MySQL.MYSQLHOST}}"})]}),"\n",(0,l.jsxs)(n.li,{children:["Ensure ",(0,l.jsx)(n.code,{children:"APP_KEY"})," is set and starts with ",(0,l.jsx)(n.code,{children:"base64:"})]}),"\n",(0,l.jsx)(n.li,{children:"Check for migration errors in logs"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common Fix:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Redeploy with fresh build\nrailway redeploy\n"})}),"\n",(0,l.jsx)(n.h3,{id:"migration-errors-table-already-exists",children:"Migration Errors: Table Already Exists"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"SQLSTATE[42S01]: Base table or view already exists: 1050 Table 'users' already exists\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Cause:"})," Migrations already ran (database has existing tables)"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution:"})," This is expected behavior. The Dockerfile command handles this:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:"CMD php artisan migrate --force || true && php artisan serve ...\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"|| true"})," allows the server to start even if migrations fail (tables already exist)."]}),"\n",(0,l.jsx)(n.h3,{id:"sessioncsrf-token-errors",children:"Session/CSRF Token Errors"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Session store not set on request\nCSRF token mismatch\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Causes:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"SESSION_DRIVER"})," not set to ",(0,l.jsx)(n.code,{children:"database"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"SANCTUM_STATEFUL_DOMAINS"})," doesn't include frontend domain"]}),"\n",(0,l.jsx)(n.li,{children:"CORS not configured"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Verify ",(0,l.jsx)(n.code,{children:"SESSION_DRIVER=database"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.code,{children:"SANCTUM_STATEFUL_DOMAINS"})," includes both backend and frontend domains (no ",(0,l.jsx)(n.code,{children:"https://"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["Ensure migrations ran (",(0,l.jsx)(n.code,{children:"sessions"})," table exists)"]}),"\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"config/cors.php"})," to allow frontend origin"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"google-oauth-fails",children:"Google OAuth Fails"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"redirect_uri_mismatch\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Cause:"})," Google Console callback URL doesn't match ",(0,l.jsx)(n.code,{children:"GOOGLE_CALLBACK_URL"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Verify ",(0,l.jsx)(n.code,{children:"GOOGLE_CALLBACK_URL"})," in Railway variables"]}),"\n",(0,l.jsx)(n.li,{children:"Check Google Console \u2192 Credentials \u2192 OAuth 2.0 Client \u2192 Authorized redirect URIs"}),"\n",(0,l.jsxs)(n.li,{children:["URLs must match exactly (including ",(0,l.jsx)(n.code,{children:"https://"}),")"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"twilio-webhooks-not-receiving-calls",children:"Twilio Webhooks Not Receiving Calls"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Error:"})," Calls come in but backend doesn't receive webhook"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Debugging:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Check Railway logs during a test call"}),"\n",(0,l.jsx)(n.li,{children:"Verify Twilio webhook URL is correct in Twilio Console"}),"\n",(0,l.jsxs)(n.li,{children:["Test webhook URL: ",(0,l.jsx)(n.code,{children:"curl https://your-backend.railway.app/api/twilio/inbound"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check Twilio debugger: ",(0,l.jsx)(n.a,{href:"https://console.twilio.com/debugger",children:"https://console.twilio.com/debugger"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Common Issue:"})," Webhook URL has typo or uses HTTP instead of HTTPS"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"railway-cli-optional",children:"Railway CLI (Optional)"}),"\n",(0,l.jsx)(n.h3,{id:"install-railway-cli",children:"Install Railway CLI"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"macOS:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"brew install railway\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Linux/WSL:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install -g @railway/cli\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Windows:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"npm install -g @railway/cli\n"})}),"\n",(0,l.jsx)(n.h3,{id:"authenticate",children:"Authenticate"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway login\n"})}),"\n",(0,l.jsx)(n.p,{children:"Opens browser for authentication."}),"\n",(0,l.jsx)(n.h3,{id:"link-project",children:"Link Project"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd /path/to/backend\nrailway link\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Select: ",(0,l.jsx)(n.strong,{children:"Workspace"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Project"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Environment"})," \u2192 ",(0,l.jsx)(n.strong,{children:"Service"})]}),"\n",(0,l.jsx)(n.h3,{id:"useful-commands",children:"Useful Commands"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"View logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway logs\nrailway logs --tail 100  # Last 100 lines\nrailway logs --follow    # Real-time\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check deployment status:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway status\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"List environment variables:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway variables --kv\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Set variable:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'railway variables --set "APP_DEBUG=false"\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Run artisan commands:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway run php artisan tinker\nrailway run php artisan migrate\nrailway run php artisan db:seed\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Open Railway dashboard:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway open\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"redeployment",children:"Redeployment"}),"\n",(0,l.jsx)(n.h3,{id:"auto-deploy-recommended",children:"Auto-Deploy (Recommended)"}),"\n",(0,l.jsx)(n.p,{children:"Railway automatically redeploys when you push to GitHub:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'git add .\ngit commit -m "Update backend features"\ngit push origin main\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Railway auto-deploy:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Detects push to main branch"}),"\n",(0,l.jsx)(n.li,{children:"Rebuilds Docker image"}),"\n",(0,l.jsx)(n.li,{children:"Runs migrations"}),"\n",(0,l.jsx)(n.li,{children:"Deploys new version (~3-5 minutes)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"manual-redeploy",children:"Manual Redeploy"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Via Dashboard:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Railway dashboard"}),"\n",(0,l.jsx)(n.li,{children:"Click on your service"}),"\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.strong,{children:"Deployments"})," tab"]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:'"Redeploy"'})," on latest deployment"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Via CLI:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway redeploy\n"})}),"\n",(0,l.jsx)(n.h3,{id:"zero-downtime-deployments",children:"Zero-Downtime Deployments"}),"\n",(0,l.jsx)(n.p,{children:"Railway provides zero-downtime deployments by default:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"New version builds"}),"\n",(0,l.jsx)(n.li,{children:"Health check passes"}),"\n",(0,l.jsx)(n.li,{children:"Traffic switches to new version"}),"\n",(0,l.jsx)(n.li,{children:"Old version terminates"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"environment-variable-reference",children:"Environment Variable Reference"}),"\n",(0,l.jsx)(n.h3,{id:"complete-list-of-required-variables",children:"Complete List of Required Variables"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# App Configuration\nAPP_NAME=DutyCall\nAPP_ENV=production\nAPP_DEBUG=false\nAPP_KEY=base64:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nAPP_URL=https://dutycall-backend-production.up.railway.app\n\n# Database (auto-linked from MySQL service)\nDB_CONNECTION=mysql\nDB_HOST=${{MySQL.MYSQLHOST}}\nDB_PORT=${{MySQL.MYSQLPORT}}\nDB_DATABASE=${{MySQL.MYSQLDATABASE}}\nDB_USERNAME=${{MySQL.MYSQLUSER}}\nDB_PASSWORD=${{MySQL.MYSQLPASSWORD}}\n\n# Twilio\nTWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_PHONE_NUMBER=+1xxxxxxxxxx\nTWILIO_API_KEY=SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_API_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_TWIML_APP_SID=APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nTWILIO_EDGE=ashburn\n\n# Google OAuth\nGOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxx\nGOOGLE_CALLBACK_URL=https://dutycall-backend-production.up.railway.app/auth/google/callback\n\n# Session & CORS\nSESSION_DRIVER=database\nSANCTUM_STATEFUL_DOMAINS=dutycall-backend-production.up.railway.app,your-frontend.vercel.app\nSESSION_DOMAIN=dutycall-backend-production.up.railway.app\nFRONTEND_URL=https://your-frontend.vercel.app\n\n# Laravel Drivers\nQUEUE_CONNECTION=database\nBROADCAST_DRIVER=log\nCACHE_DRIVER=file\nFILESYSTEM_DISK=local\nLOG_CHANNEL=stack\nLOG_LEVEL=debug\n"})}),"\n",(0,l.jsx)(n.h3,{id:"variable-format-guide",children:"Variable Format Guide"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Railway Service References:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"DB_HOST=${{MySQL.MYSQLHOST}}\n# Format: ${{ServiceName.VARIABLE_NAME}}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Domain Variables (no protocol):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"SANCTUM_STATEFUL_DOMAINS=backend.railway.app,frontend.vercel.app\nSESSION_DOMAIN=backend.railway.app\n# No https:// prefix\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"URL Variables (with protocol):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"APP_URL=https://backend.railway.app\nFRONTEND_URL=https://frontend.vercel.app\n# Include https:// prefix\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"cost-tracking",children:"Cost Tracking"}),"\n",(0,l.jsx)(n.h3,{id:"railway-pricing",children:"Railway Pricing"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Free Tier:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"$5/month credit"}),"\n",(0,l.jsx)(n.li,{children:"30 days trial (no credit card required)"}),"\n",(0,l.jsx)(n.li,{children:"Includes 1 MySQL database"}),"\n",(0,l.jsx)(n.li,{children:"Up to 500MB storage"}),"\n",(0,l.jsx)(n.li,{children:"Up to 1GB transfer"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"After Free Tier:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Backend Service:"})," ~$10-15/month"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MySQL Database:"})," ~$5-10/month"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Total:"})," ~$15-25/month"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Billing is usage-based:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"CPU usage"}),"\n",(0,l.jsx)(n.li,{children:"Memory usage"}),"\n",(0,l.jsx)(n.li,{children:"Disk storage"}),"\n",(0,l.jsx)(n.li,{children:"Network transfer"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cost Optimization Tips:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"APP_DEBUG=false"})," (reduces log storage)"]}),"\n",(0,l.jsx)(n.li,{children:"Optimize database queries"}),"\n",(0,l.jsxs)(n.li,{children:["Use caching (",(0,l.jsx)(n.code,{children:"CACHE_DRIVER=redis"})," for production)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"twilio-costs",children:"Twilio Costs"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monthly Costs:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Phone Number: ~$1.15/month"}),"\n",(0,l.jsx)(n.li,{children:"Incoming calls: ~$0.0085/minute"}),"\n",(0,l.jsx)(n.li,{children:"Outgoing calls: ~$0.013/minute"}),"\n",(0,l.jsx)(n.li,{children:"SMS (if used): ~$0.0075/message"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example Monthly Cost:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Phone number: $1.15"}),"\n",(0,l.jsx)(n.li,{children:"1,000 inbound minutes: $8.50"}),"\n",(0,l.jsx)(n.li,{children:"500 outbound minutes: $6.50"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Total:"})," ~$16/month"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cost Tracking:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Monitor in Twilio Console \u2192 Usage"}),"\n",(0,l.jsx)(n.li,{children:"Set billing alerts in Twilio account"}),"\n",(0,l.jsx)(n.li,{children:"Review monthly invoices"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"security-checklist",children:"Security Checklist"}),"\n",(0,l.jsx)(n.p,{children:"Before going to production, verify:"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.code,{children:"APP_DEBUG=false"})," (prevents sensitive error display)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.code,{children:"APP_KEY"})," is strong and unique (generated via ",(0,l.jsx)(n.code,{children:"php artisan key:generate"}),")"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Database credentials are Railway-managed (not hardcoded)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","HTTPS is enabled (Railway provides free SSL)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CORS configured for production frontend domain only"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","OAuth callback URLs whitelisted in Google Console"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Twilio webhook URLs use HTTPS (not HTTP)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Environment variables never committed to Git (.env in .gitignore)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test user accounts removed or passwords changed"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","File permissions secure (storage/ writable only)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Additional Security:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Enable Railway's built-in DDoS protection"}),"\n",(0,l.jsxs)(n.li,{children:["Set up rate limiting in Laravel (",(0,l.jsx)(n.code,{children:"throttle"})," middleware)"]}),"\n",(0,l.jsx)(n.li,{children:"Use Twilio signature validation for webhooks"}),"\n",(0,l.jsx)(n.li,{children:"Implement API authentication (Sanctum tokens)"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"monitoring--maintenance",children:"Monitoring & Maintenance"}),"\n",(0,l.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Via Railway CLI:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway logs --tail 100   # Last 100 lines\nrailway logs --follow     # Real-time logs\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Via Dashboard:"}),"\nService \u2192 Deployments \u2192 Latest \u2192 View Logs"]}),"\n",(0,l.jsx)(n.h3,{id:"check-deployment-status",children:"Check Deployment Status"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway status\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Output:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Service:     backend\nStatus:      Running\nURL:         https://dutycall-backend-production.up.railway.app\nLast Deploy: 5 minutes ago\n"})}),"\n",(0,l.jsx)(n.h3,{id:"database-monitoring",children:"Database Monitoring"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"View MySQL metrics in Railway:"}),"\nService \u2192 MySQL \u2192 Metrics"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monitor:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"CPU usage"}),"\n",(0,l.jsx)(n.li,{children:"Memory usage"}),"\n",(0,l.jsx)(n.li,{children:"Disk usage"}),"\n",(0,l.jsx)(n.li,{children:"Active connections"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"database-backup",children:"Database Backup"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Railway automatic backups:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Daily snapshots (retained 7 days)"}),"\n",(0,l.jsx)(n.li,{children:"Point-in-time recovery available"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Manual backup:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"railway run php artisan backup:run\n"})}),"\n",(0,l.jsx)(n.h3,{id:"update-dependencies",children:"Update Dependencies"}),"\n",(0,l.jsx)(n.p,{children:"When updating Laravel or Composer packages:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Update locally\ncomposer update\n\n# Commit updated lock file\ngit add composer.lock\ngit commit -m "Update Laravel dependencies"\ngit push origin main\n\n# Railway auto-redeploys with new dependencies\n'})}),"\n",(0,l.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,l.jsx)(n.p,{children:"Create a health check endpoint in Laravel:"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Route:"})," ",(0,l.jsx)(n.code,{children:"routes/api.php"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"Route::get('/health', function () {\n    return response()->json([\n        'status' => 'healthy',\n        'database' => DB::connection()->getDatabaseName(),\n        'timestamp' => now()->toISOString()\n    ]);\n});\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Test:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://dutycall-backend-production.up.railway.app/api/health\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsx)(n.p,{children:"After successful backend deployment:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Deploy Frontend"})," \u2192 Frontend deployment guide (coming soon)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Configure Custom Domain"})," \u2192 Custom domain setup guide (coming soon)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"End-to-End Testing"})," \u2192 Production testing guide (coming soon)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Set Up Monitoring"})," \u2192 Monitoring guide (coming soon)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Immediate Action Items:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Update ",(0,l.jsx)(n.code,{children:"FRONTEND_URL"})," after deploying frontend"]}),"\n",(0,l.jsx)(n.li,{children:"Test Google OAuth login flow"}),"\n",(0,l.jsx)(n.li,{children:"Test Twilio inbound call flow"}),"\n",(0,l.jsx)(n.li,{children:"Remove or secure test user accounts"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,l.jsx)(n.h3,{id:"railway-documentation",children:"Railway Documentation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.railway.app",children:"Railway Docs"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.railway.app/develop/cli",children:"Railway CLI Reference"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.railway.app/develop/variables",children:"Environment Variables"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"laravel-documentation",children:"Laravel Documentation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://laravel.com/docs/deployment",children:"Laravel Deployment"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://laravel.com/docs/sanctum",children:"Laravel Sanctum"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://laravel.com/docs/queues",children:"Laravel Queue"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"docker-resources",children:"Docker Resources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.docker.com/develop/dev-best-practices/",children:"Docker Best Practices"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/builder/",children:"Dockerfile Reference"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"third-party-services",children:"Third-Party Services"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.twilio.com/docs/usage/webhooks",children:"Twilio Webhooks"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developers.google.com/identity/protocols/oauth2",children:"Google OAuth 2.0"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,l.jsx)(n.p,{children:"If you encounter deployment issues:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Check Railway logs"})," first: ",(0,l.jsx)(n.code,{children:"railway logs"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Review environment variables"}),": ",(0,l.jsx)(n.code,{children:"railway variables --kv"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Consult troubleshooting section"})," above"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Test locally"})," with same environment variables"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Contact development team"})," with:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Error message from logs"}),"\n",(0,l.jsx)(n.li,{children:"Steps to reproduce"}),"\n",(0,l.jsx)(n.li,{children:"Environment configuration (sanitized)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common Support Channels:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Railway Discord: ",(0,l.jsx)(n.a,{href:"https://discord.gg/railway",children:"https://discord.gg/railway"})]}),"\n",(0,l.jsx)(n.li,{children:"DutyCall GitHub Issues: (your repository issues page)"}),"\n",(0,l.jsx)(n.li,{children:"Development team Slack/email"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Deployment successful?"})," \ud83c\udf89 Your DutyCall backend is now live on Railway! Next, deploy the frontend to complete the full-stack deployment."]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>d});var s=i(6540);const l={},r=s.createContext(l);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);