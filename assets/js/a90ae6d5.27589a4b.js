"use strict";(self.webpackChunkdocs_dutycall=self.webpackChunkdocs_dutycall||[]).push([[1812],{6923:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"administration/roles-permissions/overview","title":"Roles & Permissions","description":"Roles & Permissions management is only available to Administrator roles.","source":"@site/docs/administration/roles-permissions/overview.md","sourceDirName":"administration/roles-permissions","slug":"/administration/roles-permissions/overview","permalink":"/administration/roles-permissions/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/dutycall/docs/tree/main/docs/administration/roles-permissions/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"overview","title":"Roles & Permissions","sidebar_label":"Overview","sidebar_position":1},"sidebar":"docs","previous":{"title":"Analytics Dashboard","permalink":"/channels/voice/reports-analytics/analytics-dashboard"},"next":{"title":"twilio setup","permalink":"/voice/inbound/admin/twilio-setup"}}');var r=s(4848),l=s(8453);const t={id:"overview",title:"Roles & Permissions",sidebar_label:"Overview",sidebar_position:1},d="Roles & Permissions",c={},a=[{value:"Overview",id:"overview",level:2},{value:"The 4 Roles in DutyCall",id:"the-4-roles-in-dutycall",level:2},{value:"1. Agent (Level 25)",id:"1-agent-level-25",level:3},{value:"2. Department Manager (Level 50)",id:"2-department-manager-level-50",level:3},{value:"3. Account Administrator (Level 75)",id:"3-account-administrator-level-75",level:3},{value:"4. Super Administrator (Level 100)",id:"4-super-administrator-level-100",level:3},{value:"Role Hierarchy &amp; Inheritance",id:"role-hierarchy--inheritance",level:2},{value:"Permission Matrix",id:"permission-matrix",level:2},{value:"Key Export Restriction",id:"key-export-restriction",level:3},{value:"Security Principles",id:"security-principles",level:2},{value:"Least Privilege",id:"least-privilege",level:3},{value:"Role-Based Access Control (RBAC)",id:"role-based-access-control-rbac",level:3},{value:"Data Minimization",id:"data-minimization",level:3},{value:"How Role Checks Work",id:"how-role-checks-work",level:2},{value:"Backend (Laravel API)",id:"backend-laravel-api",level:3},{value:"Frontend (React/TypeScript)",id:"frontend-reacttypescript",level:3},{value:"Security Implementation",id:"security-implementation",level:3},{value:"Role Assignment",id:"role-assignment",level:2},{value:"Automatic Role Assignment (OAuth)",id:"automatic-role-assignment-oauth",level:3},{value:"Manual Role Assignment",id:"manual-role-assignment",level:3},{value:"Best Practices for Admins",id:"best-practices-for-admins",level:2},{value:"Assigning Roles",id:"assigning-roles",level:3},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Coming Soon",id:"coming-soon",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"roles--permissions",children:"Roles & Permissions"})}),"\n",(0,r.jsx)(n.admonition,{title:"Admin-Only Feature",type:"info",children:(0,r.jsxs)(n.p,{children:["Roles & Permissions management is only available to ",(0,r.jsx)(n.strong,{children:"Administrator"})," roles."]})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"DutyCall uses role-based access control (RBAC) to determine what users can see and do within the platform. Understanding roles and permissions is critical for maintaining security, compliance, and operational efficiency."}),"\n",(0,r.jsx)(n.h2,{id:"the-4-roles-in-dutycall",children:"The 4 Roles in DutyCall"}),"\n",(0,r.jsxs)(n.p,{children:["DutyCall uses a ",(0,r.jsx)(n.strong,{children:"hierarchical role system"})," where higher roles inherit permissions from lower roles."]}),"\n",(0,r.jsx)(n.h3,{id:"1-agent-level-25",children:"1. Agent (Level 25)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Handle customer interactions and daily operational tasks"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Display Name"}),': "Agent"']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Capabilities"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Accept and handle inbound calls"}),"\n",(0,r.jsx)(n.li,{children:"Make manual outbound calls"}),"\n",(0,r.jsx)(n.li,{children:"View personal call history (own data only)"}),"\n",(0,r.jsx)(n.li,{children:"Manage personal availability status"}),"\n",(0,r.jsx)(n.li,{children:"Complete wrap-up workflows"}),"\n",(0,r.jsx)(n.li,{children:"Access voice WebRTC token for browser calling"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cannot"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Export call data in bulk (restricted to Manager+)"}),"\n",(0,r.jsx)(n.li,{children:"Configure system settings"}),"\n",(0,r.jsx)(n.li,{children:"View other agents' data"}),"\n",(0,r.jsx)(n.li,{children:"Manage campaigns"}),"\n",(0,r.jsx)(n.li,{children:"Access admin features"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-department-manager-level-50",children:"2. Department Manager (Level 50)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Oversee department operations and team performance"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Display Name"}),': "Department Manager"\n',(0,r.jsx)(n.strong,{children:"Role Code"}),": ",(0,r.jsx)(n.code,{children:"dept_manager"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Capabilities"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"All Agent capabilities"}),", plus:"]}),"\n",(0,r.jsx)(n.li,{children:"Create and manage call campaigns"}),"\n",(0,r.jsx)(n.li,{children:"Start/stop campaigns"}),"\n",(0,r.jsx)(n.li,{children:"Monitor queue performance (view only)"}),"\n",(0,r.jsx)(n.li,{children:"View department/team call history and performance"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export call data"})," (CSV/Excel) - Manager+ only"]}),"\n",(0,r.jsx)(n.li,{children:"Import contacts from Google Sheets"}),"\n",(0,r.jsx)(n.li,{children:"Access team-level reporting"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cannot"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configure system integrations (Twilio, webhooks, providers)"}),"\n",(0,r.jsx)(n.li,{children:"Manage user roles or permissions"}),"\n",(0,r.jsx)(n.li,{children:"Access organization-wide settings"}),"\n",(0,r.jsx)(n.li,{children:"View data outside their department scope"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-account-administrator-level-75",children:"3. Account Administrator (Level 75)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Manage account settings, users, and organizational configuration"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Display Name"}),': "Account Administrator"\n',(0,r.jsx)(n.strong,{children:"Role Code"}),": ",(0,r.jsx)(n.code,{children:"account_admin"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Capabilities"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"All Department Manager capabilities"}),", plus:"]}),"\n",(0,r.jsx)(n.li,{children:"Manage users and assign roles"}),"\n",(0,r.jsx)(n.li,{children:"Configure account settings"}),"\n",(0,r.jsx)(n.li,{children:"Manage campaigns across all departments"}),"\n",(0,r.jsx)(n.li,{children:"Access organization-wide reporting"}),"\n",(0,r.jsx)(n.li,{children:"Manage provider settings (Twilio, communication channels)"}),"\n",(0,r.jsx)(n.li,{children:"Configure webhooks and integrations"}),"\n",(0,r.jsx)(n.li,{children:"Export all organizational data"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cannot"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access super admin functions (system-wide settings)"}),"\n",(0,r.jsx)(n.li,{children:"Manage billing or platform-level configuration"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-super-administrator-level-100",children:"4. Super Administrator (Level 100)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Full system access for platform management"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Display Name"}),': "Super Administrator"\n',(0,r.jsx)(n.strong,{children:"Role Code"}),": ",(0,r.jsx)(n.code,{children:"super_admin"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Capabilities"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unrestricted access"})," to all platform features"]}),"\n",(0,r.jsx)(n.li,{children:"All Account Admin capabilities, plus:"}),"\n",(0,r.jsx)(n.li,{children:"System-wide configuration and settings"}),"\n",(0,r.jsx)(n.li,{children:"Manage all organizations/accounts"}),"\n",(0,r.jsx)(n.li,{children:"Access audit logs and security settings"}),"\n",(0,r.jsx)(n.li,{children:"Platform billing and subscription management"}),"\n",(0,r.jsx)(n.li,{children:"Database and infrastructure access"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Special Behavior"}),": Super admins bypass all role checks and can access everything."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"role-hierarchy--inheritance",children:"Role Hierarchy & Inheritance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"super_admin (100) \u2500\u2510\n                   \u251c\u2500> Can access everything\naccount_admin (75) \u2500\u2524\n                    \u251c\u2500> Inherits dept_manager permissions\ndept_manager (50) \u2500\u2500\u2524\n                    \u251c\u2500> Inherits agent permissions\nagent (25) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key principle"}),": Higher roles inherit ALL permissions from lower roles, plus additional capabilities."]}),"\n",(0,r.jsx)(n.h2,{id:"permission-matrix",children:"Permission Matrix"}),"\n",(0,r.jsx)(n.p,{children:"Complete breakdown of what each role can do:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Capability"}),(0,r.jsx)(n.th,{children:"Agent"}),(0,r.jsx)(n.th,{children:"Dept Manager"}),(0,r.jsx)(n.th,{children:"Account Admin"}),(0,r.jsx)(n.th,{children:"Super Admin"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Voice Operations"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accept inbound calls"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Make outbound calls (manual dialer)"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Access WebRTC voice token"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Create/manage campaigns"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Start/stop campaigns"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Reporting & Data"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"View personal call history"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"View team/department reports"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"View organization-wide reports"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Export call data (CSV/Excel)"})}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Configuration"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Manage queue settings"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Configure Twilio integration"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Set up webhooks"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Manage providers (Twilio, etc.)"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"User Management"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Manage users"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Assign roles"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Manage departments"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"System Administration"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Access audit logs"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Data retention policies"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Platform billing"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"System-wide configuration"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"key-export-restriction",children:"Key Export Restriction"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Data export is restricted to Manager+ roles"})," for security and compliance reasons. See ",(0,r.jsx)(n.a,{href:"/administration/data-management/data-export#why-we-restrict-data-exports",children:"Data Export"})," for detailed rationale."]}),"\n",(0,r.jsx)(n.h2,{id:"security-principles",children:"Security Principles"}),"\n",(0,r.jsx)(n.h3,{id:"least-privilege",children:"Least Privilege"}),"\n",(0,r.jsxs)(n.p,{children:["Users receive the ",(0,r.jsx)(n.strong,{children:"minimum permissions"})," necessary to perform their job functions. This reduces:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Risk of accidental data exposure"}),"\n",(0,r.jsx)(n.li,{children:"Attack surface for security incidents"}),"\n",(0,r.jsx)(n.li,{children:"Compliance liability"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"role-based-access-control-rbac",children:"Role-Based Access Control (RBAC)"}),"\n",(0,r.jsxs)(n.p,{children:["Permissions are tied to ",(0,r.jsx)(n.strong,{children:"roles, not individuals"}),". This makes it easier to:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Onboard new team members"}),"\n",(0,r.jsx)(n.li,{children:"Audit who has access to what"}),"\n",(0,r.jsx)(n.li,{children:"Adjust permissions at scale"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"data-minimization",children:"Data Minimization"}),"\n",(0,r.jsx)(n.p,{children:"Users only see data relevant to their work:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Agents see their own performance"}),"\n",(0,r.jsx)(n.li,{children:"Managers see their team's performance"}),"\n",(0,r.jsx)(n.li,{children:"Admins see organization-wide data"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This aligns with GDPR/CCPA data minimization requirements."}),"\n",(0,r.jsx)(n.h2,{id:"how-role-checks-work",children:"How Role Checks Work"}),"\n",(0,r.jsx)(n.h3,{id:"backend-laravel-api",children:"Backend (Laravel API)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Middleware-based role checking"})," on API routes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Example: Call history export endpoint\nRoute::get('/call-history/export', [CallHistoryController::class, 'export'])\n    ->middleware('role:super_admin,account_admin,dept_manager');\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"User model helper methods:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Check exact role\n$user->hasRole('super_admin')\n\n// Check if user has any of the given roles\n$user->hasAnyRole(['super_admin', 'account_admin'])\n\n// Check access with super admin bypass\n$user->canAccess(['account_admin', 'dept_manager'])\n\n// Compare role levels\n$user->getRoleLevel() // Returns: 100, 75, 50, or 25\n$user->hasHigherRoleThan($otherUser)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"frontend-reacttypescript",children:"Frontend (React/TypeScript)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Context-based role checking"})," in the UI:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Check exact role\nhasRole('super_admin')\n\n// Check if user has any of these roles\nhasAnyRole(['super_admin', 'account_admin', 'dept_manager'])\n\n// Check access (with super admin bypass)\ncanAccess(['account_admin', 'dept_manager'])\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example usage"})," in components:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"{hasAnyRole(['super_admin', 'account_admin', 'dept_manager']) && (\n  <ExportButton onClick={handleExport} />\n)}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"security-implementation",children:"Security Implementation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backend enforcement is primary"}),": Frontend checks are for UX only. All permissions are enforced server-side."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Super admin bypass"}),": ",(0,r.jsx)(n.code,{children:"super_admin"})," role bypasses all role checks and can access everything."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API returns 403 Forbidden"})," if a user attempts to access a restricted endpoint."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Frontend hides UI elements"})," users don't have permission to use (improves UX, not security)."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"role-assignment",children:"Role Assignment"}),"\n",(0,r.jsx)(n.h3,{id:"automatic-role-assignment-oauth",children:"Automatic Role Assignment (OAuth)"}),"\n",(0,r.jsx)(n.p,{children:"When users log in via Google OAuth, roles are assigned based on email domain:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Email Domain"}),(0,r.jsx)(n.th,{children:"Auto-Assigned Role"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@dutycall.net"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"super_admin"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@admin.dutycall.net"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"account_admin"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@manager.dutycall.net"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dept_manager"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"All other domains"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"agent"})," (default)"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"manual-role-assignment",children:"Manual Role Assignment"}),"\n",(0,r.jsx)(n.p,{children:"Account administrators can manually assign roles to users through the user management interface (coming soon)."}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-for-admins",children:"Best Practices for Admins"}),"\n",(0,r.jsx)(n.h3,{id:"assigning-roles",children:"Assigning Roles"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Start with least privilege"}),": Assign the lowest role that allows the user to do their job"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review regularly"}),": Audit user roles quarterly to ensure they're still appropriate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document exceptions"}),": If someone needs elevated permissions, document why"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Limit super admins"}),": Only platform owners should have ",(0,r.jsx)(n.code,{children:"super_admin"})," access"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Never share admin credentials"}),": Each person should have their own account"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor data exports"}),": Review who is exporting data and why (audit logs coming soon)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Revoke access promptly"}),": When someone leaves, disable their account immediately"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use departments for scoping"}),": Managers should only see their department's data"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"coming-soon",children:"Coming Soon"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User management interface"}),": Assign roles via admin dashboard"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom permissions"}),": Fine-grained control beyond role-based access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit logs"}),": Track who did what and when"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSO/SAML integration"}),": Enterprise single sign-on support"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API access tokens"}),": Role-scoped API keys for integrations"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Need help managing user roles?"})," Contact support or your account representative."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);